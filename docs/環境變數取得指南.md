# 🔑 環境變數取得指南

本指南說明 `backend/.env.example` 中所有變數的取得方式。

## 📋 必須填寫的變數

### 1. JWT_SECRET (第 13 行)

**這是什麼？**
- JWT (JSON Web Token) 的簽名密鑰
- 用於加密和驗證用戶身份令牌
- **不需要從外部獲取，需要自己生成**

**如何生成？**

#### Windows PowerShell
```powershell
[Convert]::ToBase64String([System.Security.Cryptography.RandomNumberGenerator]::GetBytes(64))
```
複製生成的字符串，貼到 `JWT_SECRET=` 後面

#### Linux/Mac
```bash
openssl rand -hex 64
```
複製生成的字符串，貼到 `JWT_SECRET=` 後面

#### Node.js
```bash
node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
```
複製生成的字符串，貼到 `JWT_SECRET=` 後面

**範例：**
```env
JWT_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6...
```

---

### 2. DATABASE_URL (第 19 行)

**這是什麼？**
- NeonDB 資料庫的連接字符串
- 用於後端連接到 PostgreSQL 資料庫
- **需要從 NeonDB Dashboard 獲取**

**如何獲取？**

#### 步驟 1：登錄 NeonDB
1. 訪問 [neon.tech](https://neon.tech)
2. 使用 GitHub 帳號登錄（或註冊新帳號）

#### 步驟 2：創建或選擇專案
1. 登錄後，點擊 **"Create Project"** 或選擇現有專案
2. 填寫專案信息：
   - **Project Name**: `rendezvous-db`（或您喜歡的名稱）
   - **Region**: 選擇離您最近的區域（例如：`Asia Pacific (Singapore)`）
   - **PostgreSQL Version**: 選擇最新版本（預設即可）
3. 點擊 **"Create Project"**
4. 等待專案創建完成（約 30 秒）

#### 步驟 3：獲取連接字符串
1. 在專案 Dashboard，找到 **"Connection Details"** 或 **"Connection String"** 區塊
2. 點擊 **"Copy"** 按鈕複製連接字符串
3. 連接字符串格式如下：
   ```
   postgresql://username:password@ep-xxx-xxx.region.neon.tech/dbname?sslmode=require
   ```

#### 步驟 4：填入 .env 文件
將複製的連接字符串貼到 `DATABASE_URL=` 後面

**範例：**
```env
DATABASE_URL=postgresql://user:password@ep-cool-darkness-123456.us-east-2.aws.neon.tech/neondb?sslmode=require
```

**詳細步驟請查看：** [docs/NEONDB_SETUP_GUIDE.md](./NEONDB_SETUP_GUIDE.md)

---

## 📋 已預設的變數（通常不需要修改）

### PORT (第 7 行)
- 後端服務器端口
- 預設值：`3001`
- 通常不需要修改

### NODE_ENV (第 8 行)
- Node.js 環境模式
- 預設值：`development`
- 通常不需要修改

### FRONTEND_URL (第 22 行)
- 前端運行的 URL（用於 CORS 設置）
- 預設值：`http://localhost:3000`
- 如果前端運行在其他端口，需要修改

---

## 📋 可選變數（如果不需要圖片上傳功能可以留空）

### Cloudinary (第 28-30 行)
- 用於圖片存儲服務
- 如果不需要圖片上傳功能，可以留空
- 獲取方式：訪問 [cloudinary.com](https://cloudinary.com/) 註冊帳號

### AWS S3 (第 32-36 行)
- 用於圖片存儲服務（Cloudinary 的替代方案）
- 如果不需要圖片上傳功能，可以留空
- 獲取方式：訪問 [AWS Console](https://console.aws.amazon.com/) 創建 S3 Bucket

---

## ✅ 快速檢查清單

在填寫 `backend/.env` 文件前，確認您已經：

- [ ] 生成了 `JWT_SECRET`（使用上述任一方法）
- [ ] 創建了 NeonDB 專案
- [ ] 複製了 `DATABASE_URL` 連接字符串
- [ ] 確認 `FRONTEND_URL` 與前端運行端口一致（預設 `http://localhost:3000`）

---

## 🆘 需要幫助？

- **JWT_SECRET 生成問題**：查看 [docs/ENV_SETUP.md](./ENV_SETUP.md) 的「生成 JWT Secret」章節
- **DATABASE_URL 獲取問題**：查看 [docs/NEONDB_SETUP_GUIDE.md](./NEONDB_SETUP_GUIDE.md) 的完整指南
- **其他問題**：查看 [docs/README.md](./README.md) 文檔索引

---

**祝設置順利！** 🚀




